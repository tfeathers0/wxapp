<view class="calendar">
  <!-- 顶部月份切换 -->
  <view class="header">
    <button class="month-btn" bindtap="prevMonth">上个月</button>
    <text>{{currentYear}}年 {{currentMonth+1}}月</text>
    <button class="month-btn" bindtap="nextMonth">下个月</button>
  </view>

  <!-- 星期标题 -->
  <view class="week">
    <text>日</text>
    <text>一</text>
    <text>二</text>
    <text>三</text>
    <text>四</text>
    <text>五</text>
    <text>六</text>
  </view>

  <!-- 日期格子 -->
  <view class="days">
    <block wx:for="{{days}}" wx:key="index">
      <view class="day {{item.type}}" bindtap="onDayTap" data-day="{{item.day}}">
        <text>{{item.day}}</text>
      </view>
    </block>
  </view>

  <!-- 图例 -->
  <view class="legend">
    <view class="legend-item">
      <view class="dot ovulation"></view>
      <text>排卵日</text>
    </view>
    <view class="legend-item">
      <view class="dot period"></view>
      <text>生理期</text>
    </view>
  </view>

  <!-- 信息面板 -->
  <view class="info-panel">
    <!-- 上一次月经 -->
    <view class="row">
      <text>这次月经：</text>
      <text>{{cycleInfo.nowPeriod || '请点击日历选择'}}</text>
    </view>

    <!-- 下一次月经 -->
    <view class="row">
      <text>下次月经：</text>
      <text>{{cycleInfo.futurePeriod || '未计算'}}</text>
    </view>

    <!-- 周期天数 -->
    <view class="row">
      <text>周期天数：</text>
      <text>{{cycleInfo.cycleLength}}</text>
    </view>

    <!-- 经期长度 -->
    <!-- 经期长度 -->
<view class="row">
  <text>经期长度：</text>
  <view class="stepper">
    <button class="step-btn" bindtap="decreasePeriodDays">-</button>
    <text class="step-value">{{cycleInfo.periodDays}}</text>
    <button class="step-btn" bindtap="increasePeriodDays">+</button>
  </view>
  <text>天</text>
</view>


    <!-- 历史记录按钮 -->
    <view class="row">
      <button bindtap="goHistoryPage" class="history-btn">查看历史记录</button>
    </view>
  </view>

  <!-- 底部留白 -->
  <view class="footer-space"></view>
</view>