<!-- pages/history/history.wxml -->
<view class="container">
  <view class="header">
    <view class="header-content">
      <text class="header-icon">ğŸ“…</text>
      <text class="header-title">å†å²æœˆç»è®°å½•</text>
    </view>
    <view class="history-count">å…± {{totalRecords}} æ¡è®°å½•</view>
  </view>
  
  <view class="content">
    <!-- ç»Ÿè®¡ä¿¡æ¯ -->
    <view class="stats-container">
      <view class="stat-card">
        <text class="stat-value">{{avgCycleDays || '--'}}</text>
        <text class="stat-label">å¹³å‡å‘¨æœŸ(å¤©)</text>
      </view>
      <view class="stat-card">
        <text class="stat-value">{{avgPeriodDays || '--'}}</text>
        <text class="stat-label">ç»æœŸå¤©æ•°(å¤©)</text>
      </view>
      <view class="stat-card">
        <text class="stat-value">{{nextPrediction || '--'}}</text>
        <text class="stat-label">é¢„æµ‹ä¸‹æ¬¡ç»æœŸ</text>
      </view>
    </view>
    
    <!-- Starting Days List -->
    <view class="section-title" wx:if="{{startingDaysList.length > 0}}">
      <text class="section-icon">ğŸ”´</text>
      <text class="section-text">ç»æœŸç¬¬ä¸€å¤©è®°å½•</text>
    </view>
    
    <view class="history-list" wx:if="{{startingDaysList.length > 0}}">
      <view class="history-item" wx:for="{{startingDaysList}}" wx:key="index" 
            bindtap="navigateToDateRecord" data-date="{{item.date}}">
        <text class="item-icon">{{item.icon}}</text>
        <text class="item-date">{{item.date}}</text>
        <text class="item-type">{{item.displayText}}</text>
      </view>
    </view>
    
    <!-- During Days List -->
    <view class="section-title" wx:if="{{duringDaysList.length > 0}}">
      <text class="section-icon">ğŸŸ£</text>
      <text class="section-text">ç»æœŸæ—¥æœŸè®°å½•</text>
    </view>
    
    <view class="history-list" wx:if="{{duringDaysList.length > 0}}">
      <view class="history-item" wx:for="{{duringDaysList}}" wx:key="index" 
            bindtap="navigateToDateRecord" data-date="{{item.date}}">
        <text class="item-icon">{{item.icon}}</text>
        <text class="item-date">{{item.date}}</text>
        <text class="item-type">{{item.displayText}}</text>
      </view>
    </view>
    
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{history.length === 0 && startingDaysList.length === 0 && duringDaysList.length === 0}}">
      <text class="empty-icon">ğŸ“­</text>
      <text class="empty-text">æš‚æ— å†å²è®°å½•</text>
    </view>
  </view>
</view>