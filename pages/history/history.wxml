<!-- pages/history/history.wxml -->
<view class="container">
  <view class="header">
    <view class="header-content">
      <text class="header-icon">📅</text>
      <text class="header-title">历史月经记录</text>
    </view>
    <view class="history-count">共 {{totalRecords}} 条记录</view>
  </view>
  
  <view class="content">
    <!-- 统计信息 -->
    <view class="stats-container">
      <view class="stat-card">
        <text class="stat-value">{{avgCycleDays || '--'}}</text>
        <text class="stat-label">平均周期(天)</text>
      </view>
      <view class="stat-card">
        <text class="stat-value">{{avgPeriodDays || '--'}}</text>
        <text class="stat-label">经期天数(天)</text>
      </view>
      <view class="stat-card">
        <text class="stat-value">{{nextPrediction || '--'}}</text>
        <text class="stat-label">预测下次经期</text>
      </view>
    </view>
    
    <!-- Starting Days List -->
    <view class="section-title" wx:if="{{startingDaysList.length > 0}}">
      <text class="section-icon">🔴</text>
      <text class="section-text">经期第一天记录</text>
    </view>
    
    <view class="history-list" wx:if="{{startingDaysList.length > 0}}">
      <view class="history-item" wx:for="{{startingDaysList}}" wx:key="index" 
            bindtap="navigateToDateRecord" data-date="{{item.date}}">
        <text class="item-icon">{{item.icon}}</text>
        <text class="item-date">{{item.date}}</text>
        <text class="item-type">{{item.displayText}}</text>
      </view>
    </view>
    
    <!-- During Days List -->
    <view class="section-title" wx:if="{{duringDaysList.length > 0}}">
      <text class="section-icon">🟣</text>
      <text class="section-text">经期日期记录</text>
    </view>
    
    <view class="history-list" wx:if="{{duringDaysList.length > 0}}">
      <view class="history-item" wx:for="{{duringDaysList}}" wx:key="index" 
            bindtap="navigateToDateRecord" data-date="{{item.date}}">
        <text class="item-icon">{{item.icon}}</text>
        <text class="item-date">{{item.date}}</text>
        <text class="item-type">{{item.displayText}}</text>
      </view>
    </view>
    
    <!-- 空状态 -->
    <view class="empty-state" wx:if="{{history.length === 0 && startingDaysList.length === 0 && duringDaysList.length === 0}}">
      <text class="empty-icon">📭</text>
      <text class="empty-text">暂无历史记录</text>
    </view>
  </view>
</view>